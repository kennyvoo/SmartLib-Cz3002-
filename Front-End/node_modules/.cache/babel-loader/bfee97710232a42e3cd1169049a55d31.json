{"ast":null,"code":"import { createElement, Component, createRef, Fragment, createContext } from 'react';\nimport Script from 'react-load-script';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nfunction __generator(thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n}\n\nvar chartDefaultProps = {\n  graph_id: null,\n  legend_toggle: false,\n  graphID: null,\n  options: {\n    colors: null\n  },\n  data: null,\n  rows: null,\n  columns: null,\n  diffdata: null,\n  chartEvents: null,\n  legendToggle: false,\n  chartActions: null,\n  getChartWrapper: function (chartWrapper, google) {},\n  getChartEditor: null,\n  className: \"\",\n  style: {},\n  formatters: null,\n  spreadSheetUrl: null,\n  spreadSheetQueryParameters: {\n    headers: 1,\n    gid: 1\n  },\n  rootProps: {},\n  chartWrapperParams: {},\n  controls: null,\n  render: null,\n  toolbarItems: null,\n  toolbarID: null\n};\n\nvar GoogleChartLoader = function (_super) {\n  __extends(GoogleChartLoader, _super);\n\n  function GoogleChartLoader() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.handleGoogleChartsLoaderScriptLoaded = function (windowGoogleCharts) {\n      var _a = _this.props,\n          version = _a.chartVersion,\n          packages = _a.chartPackages,\n          language = _a.chartLanguage,\n          mapsApiKey = _a.mapsApiKey,\n          onLoad = _a.onLoad;\n      windowGoogleCharts.charts.load(version || \"current\", {\n        packages: packages || [\"corechart\", \"controls\"],\n        language: language || \"en\",\n        mapsApiKey: mapsApiKey\n      });\n      windowGoogleCharts.charts.setOnLoadCallback(function () {\n        onLoad(windowGoogleCharts);\n      });\n    };\n\n    return _this;\n  }\n\n  GoogleChartLoader.prototype.shouldComponentUpdate = function (nextProps) {\n    return nextProps.chartPackages === this.props.chartPackages;\n  };\n\n  GoogleChartLoader.prototype.render = function () {\n    var _this = this;\n\n    var onError = this.props.onError;\n    return createElement(Script, {\n      url: \"https://www.gstatic.com/charts/loader.js\",\n      onError: onError,\n      onLoad: function () {\n        var windowWithGoogle = window;\n\n        if (windowWithGoogle.google) {\n          _this.handleGoogleChartsLoaderScriptLoaded(windowWithGoogle.google);\n        }\n      }\n    });\n  };\n\n  return GoogleChartLoader;\n}(Component);\n\nvar uniqueID = 0;\n\nvar generateUniqueID = function () {\n  uniqueID += 1;\n  return \"reactgooglegraph-\" + uniqueID;\n};\n\nvar DEFAULT_CHART_COLORS = [\"#3366CC\", \"#DC3912\", \"#FF9900\", \"#109618\", \"#990099\", \"#3B3EAC\", \"#0099C6\", \"#DD4477\", \"#66AA00\", \"#B82E2E\", \"#316395\", \"#994499\", \"#22AA99\", \"#AAAA11\", \"#6633CC\", \"#E67300\", \"#8B0707\", \"#329262\", \"#5574A6\", \"#3B3EAC\"];\nvar _this = undefined;\n\nvar loadDataTableFromSpreadSheet = function (googleViz, spreadSheetUrl, urlParams) {\n  if (urlParams === void 0) {\n    urlParams = {};\n  }\n\n  return __awaiter(_this, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n      return [2, new Promise(function (resolve, reject) {\n        var headers = \"\" + (urlParams.headers ? \"headers=\" + urlParams.headers : \"headers=0\");\n        var queryString = \"\" + (urlParams.query ? \"&tq=\" + encodeURIComponent(urlParams.query) : \"\");\n        var gid = \"\" + (urlParams.gid ? \"&gid=\" + urlParams.gid : \"\");\n        var sheet = \"\" + (urlParams.sheet ? \"&sheet=\" + urlParams.sheet : \"\");\n        var access_token = \"\" + (urlParams.access_token ? \"&access_token=\" + urlParams.access_token : \"\");\n        var urlQueryString = \"\" + headers + gid + sheet + queryString + access_token;\n        var urlToSpreadSheet = spreadSheetUrl + \"/gviz/tq?\" + urlQueryString;\n        var query = new googleViz.visualization.Query(urlToSpreadSheet);\n        query.send(function (response) {\n          if (response.isError()) {\n            reject(\"Error in query:  \" + response.getMessage() + \" \" + response.getDetailedMessage());\n          } else {\n            resolve(response.getDataTable());\n          }\n        });\n      })];\n    });\n  });\n};\n\nvar _a = createContext(chartDefaultProps),\n    Provider = _a.Provider,\n    Consumer = _a.Consumer;\n\nvar ContextProvider = function (_a) {\n  var children = _a.children,\n      value = _a.value;\n  return createElement(Provider, {\n    value: value\n  }, children);\n};\n\nvar ContextConsumer = function (_a) {\n  var render = _a.render;\n  return createElement(Consumer, null, function (context) {\n    return render(context);\n  });\n};\n\nvar GRAY_COLOR = \"#CCCCCC\";\n\nvar GoogleChartDataTableInner = function (_super) {\n  __extends(GoogleChartDataTableInner, _super);\n\n  function GoogleChartDataTableInner() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      hiddenColumns: []\n    };\n\n    _this.listenToLegendToggle = function () {\n      var _a = _this.props,\n          google = _a.google,\n          googleChartWrapper = _a.googleChartWrapper;\n      google.visualization.events.addListener(googleChartWrapper, \"select\", function () {\n        var chart = googleChartWrapper.getChart();\n        var selection = chart.getSelection();\n        var dataTable = googleChartWrapper.getDataTable();\n\n        if (selection.length === 0 || selection[0].row !== null || dataTable === null) {\n          return;\n        }\n\n        var columnIndex = selection[0].column;\n\n        var columnID = _this.getColumnID(dataTable, columnIndex);\n\n        if (_this.state.hiddenColumns.includes(columnID)) {\n          _this.setState(function (state) {\n            return __assign({}, state, {\n              hiddenColumns: state.hiddenColumns.filter(function (colID) {\n                return colID !== columnID;\n              }).slice()\n            });\n          });\n        } else {\n          _this.setState(function (state) {\n            return __assign({}, state, {\n              hiddenColumns: state.hiddenColumns.concat([columnID])\n            });\n          });\n        }\n      });\n    };\n\n    _this.applyFormatters = function (dataTable, formatters) {\n      var google = _this.props.google;\n\n      for (var _i = 0, formatters_1 = formatters; _i < formatters_1.length; _i++) {\n        var formatter = formatters_1[_i];\n\n        switch (formatter.type) {\n          case \"ArrowFormat\":\n            {\n              var vizFormatter = new google.visualization.ArrowFormat(formatter.options);\n              vizFormatter.format(dataTable, formatter.column);\n              break;\n            }\n\n          case \"BarFormat\":\n            {\n              var vizFormatter = new google.visualization.BarFormat(formatter.options);\n              vizFormatter.format(dataTable, formatter.column);\n              break;\n            }\n\n          case \"ColorFormat\":\n            {\n              var vizFormatter = new google.visualization.ColorFormat(formatter.options);\n              var ranges = formatter.ranges;\n\n              for (var _a = 0, ranges_1 = ranges; _a < ranges_1.length; _a++) {\n                var range = ranges_1[_a];\n                vizFormatter.addRange.apply(vizFormatter, range);\n              }\n\n              vizFormatter.format(dataTable, formatter.column);\n              break;\n            }\n\n          case \"DateFormat\":\n            {\n              var vizFormatter = new google.visualization.DateFormat(formatter.options);\n              vizFormatter.format(dataTable, formatter.column);\n              break;\n            }\n\n          case \"NumberFormat\":\n            {\n              var vizFormatter = new google.visualization.NumberFormat(formatter.options);\n              vizFormatter.format(dataTable, formatter.column);\n              break;\n            }\n\n          case \"PatternFormat\":\n            {\n              var vizFormatter = new google.visualization.PatternFormat(formatter.options);\n              vizFormatter.format(dataTable, formatter.column);\n              break;\n            }\n        }\n      }\n    };\n\n    _this.getColumnID = function (dataTable, columnIndex) {\n      return dataTable.getColumnId(columnIndex) || dataTable.getColumnLabel(columnIndex);\n    };\n\n    _this.draw = function (_a) {\n      var data = _a.data,\n          diffdata = _a.diffdata,\n          rows = _a.rows,\n          columns = _a.columns,\n          options = _a.options,\n          legend_toggle = _a.legend_toggle,\n          legendToggle = _a.legendToggle,\n          chartType = _a.chartType,\n          formatters = _a.formatters,\n          spreadSheetUrl = _a.spreadSheetUrl,\n          spreadSheetQueryParameters = _a.spreadSheetQueryParameters;\n      return __awaiter(_this, void 0, void 0, function () {\n        var _b, google, googleChartWrapper, dataTable, chartDiff, oldData, newData, columnCount, i, columnID, previousColumnLabel, previousColumnID, previousColumnType, chart;\n\n        return __generator(this, function (_c) {\n          switch (_c.label) {\n            case 0:\n              _b = this.props, google = _b.google, googleChartWrapper = _b.googleChartWrapper;\n              chartDiff = null;\n\n              if (diffdata !== null) {\n                oldData = google.visualization.arrayToDataTable(diffdata.old);\n                newData = google.visualization.arrayToDataTable(diffdata.new);\n                chartDiff = google.visualization[chartType].prototype.computeDiff(oldData, newData);\n              }\n\n              if (!(data !== null)) return [3, 1];\n\n              if (Array.isArray(data)) {\n                dataTable = google.visualization.arrayToDataTable(data);\n              } else {\n                dataTable = new google.visualization.DataTable(data);\n              }\n\n              return [3, 5];\n\n            case 1:\n              if (!(rows !== null && columns !== null)) return [3, 2];\n              dataTable = google.visualization.arrayToDataTable([columns].concat(rows));\n              return [3, 5];\n\n            case 2:\n              if (!(spreadSheetUrl !== null)) return [3, 4];\n              return [4, loadDataTableFromSpreadSheet(google, spreadSheetUrl, spreadSheetQueryParameters)];\n\n            case 3:\n              dataTable = _c.sent();\n              return [3, 5];\n\n            case 4:\n              dataTable = google.visualization.arrayToDataTable([]);\n              _c.label = 5;\n\n            case 5:\n              columnCount = dataTable.getNumberOfColumns();\n\n              for (i = 0; i < columnCount; i += 1) {\n                columnID = this.getColumnID(dataTable, i);\n\n                if (this.state.hiddenColumns.includes(columnID)) {\n                  previousColumnLabel = dataTable.getColumnLabel(i);\n                  previousColumnID = dataTable.getColumnId(i);\n                  previousColumnType = dataTable.getColumnType(i);\n                  dataTable.removeColumn(i);\n                  dataTable.addColumn({\n                    label: previousColumnLabel,\n                    id: previousColumnID,\n                    type: previousColumnType\n                  });\n                }\n              }\n\n              chart = googleChartWrapper.getChart();\n\n              if (googleChartWrapper.getChartType() === \"Timeline\") {\n                chart && chart.clearChart();\n              }\n\n              googleChartWrapper.setChartType(chartType);\n              googleChartWrapper.setOptions(options);\n              googleChartWrapper.setDataTable(dataTable);\n              googleChartWrapper.draw();\n\n              if (this.props.googleChartDashboard !== null) {\n                this.props.googleChartDashboard.draw(dataTable);\n              }\n\n              if (chartDiff !== null) {\n                googleChartWrapper.setDataTable(chartDiff);\n                googleChartWrapper.draw();\n              }\n\n              if (formatters !== null) {\n                this.applyFormatters(dataTable, formatters);\n                googleChartWrapper.setDataTable(dataTable);\n                googleChartWrapper.draw();\n              }\n\n              if (legendToggle === true || legend_toggle === true) {\n                this.grayOutHiddenColumns({\n                  options: options\n                });\n              }\n\n              return [2];\n          }\n        });\n      });\n    };\n\n    _this.grayOutHiddenColumns = function (_a) {\n      var options = _a.options;\n      var googleChartWrapper = _this.props.googleChartWrapper;\n      var dataTable = googleChartWrapper.getDataTable();\n      if (dataTable === null) return;\n      var columnCount = dataTable.getNumberOfColumns();\n      var hasAHiddenColumn = _this.state.hiddenColumns.length > 0;\n      if (hasAHiddenColumn === false) return;\n      var colors = Array.from({\n        length: columnCount - 1\n      }).map(function (dontcare, i) {\n        var columnID = _this.getColumnID(dataTable, i + 1);\n\n        if (_this.state.hiddenColumns.includes(columnID)) {\n          return GRAY_COLOR;\n        } else if (typeof options.colors !== \"undefined\" && options.colors !== null) {\n          return options.colors[i];\n        } else {\n          return DEFAULT_CHART_COLORS[i];\n        }\n      });\n      googleChartWrapper.setOptions(__assign({}, options, {\n        colors: colors\n      }));\n      googleChartWrapper.draw();\n    };\n\n    _this.onResize = function () {\n      var googleChartWrapper = _this.props.googleChartWrapper;\n      googleChartWrapper.draw();\n    };\n\n    return _this;\n  }\n\n  GoogleChartDataTableInner.prototype.componentDidMount = function () {\n    this.draw(this.props);\n    window.addEventListener(\"resize\", this.onResize);\n\n    if (this.props.legend_toggle || this.props.legendToggle) {\n      this.listenToLegendToggle();\n    }\n  };\n\n  GoogleChartDataTableInner.prototype.componentWillUnmount = function () {\n    var _a = this.props,\n        google = _a.google,\n        googleChartWrapper = _a.googleChartWrapper;\n    window.removeEventListener(\"resize\", this.onResize);\n    google.visualization.events.removeAllListeners(googleChartWrapper);\n\n    if (googleChartWrapper.getChartType() === \"Timeline\") {\n      googleChartWrapper.getChart() && googleChartWrapper.getChart().clearChart();\n    }\n  };\n\n  GoogleChartDataTableInner.prototype.componentDidUpdate = function () {\n    this.draw(this.props);\n  };\n\n  GoogleChartDataTableInner.prototype.render = function () {\n    return null;\n  };\n\n  return GoogleChartDataTableInner;\n}(Component);\n\nvar GoogleChartDataTable = function (_super) {\n  __extends(GoogleChartDataTable, _super);\n\n  function GoogleChartDataTable() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  GoogleChartDataTable.prototype.componentDidMount = function () {};\n\n  GoogleChartDataTable.prototype.componentWillUnmount = function () {};\n\n  GoogleChartDataTable.prototype.shouldComponentUpdate = function () {\n    return false;\n  };\n\n  GoogleChartDataTable.prototype.render = function () {\n    var _a = this.props,\n        google = _a.google,\n        googleChartWrapper = _a.googleChartWrapper,\n        googleChartDashboard = _a.googleChartDashboard;\n    return createElement(ContextConsumer, {\n      render: function (props) {\n        return createElement(GoogleChartDataTableInner, __assign({}, props, {\n          google: google,\n          googleChartWrapper: googleChartWrapper,\n          googleChartDashboard: googleChartDashboard\n        }));\n      }\n    });\n  };\n\n  return GoogleChartDataTable;\n}(Component);\n\nvar GoogleChartEvents = function (_super) {\n  __extends(GoogleChartEvents, _super);\n\n  function GoogleChartEvents() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  GoogleChartEvents.prototype.shouldComponentUpdate = function () {\n    return false;\n  };\n\n  GoogleChartEvents.prototype.listenToEvents = function (_a) {\n    var _this = this;\n\n    var chartEvents = _a.chartEvents,\n        google = _a.google,\n        googleChartWrapper = _a.googleChartWrapper;\n\n    if (chartEvents === null) {\n      return;\n    }\n\n    google.visualization.events.removeAllListeners(googleChartWrapper);\n\n    var _loop_1 = function (event_1) {\n      var eventName = event_1.eventName,\n          callback = event_1.callback;\n      google.visualization.events.addListener(googleChartWrapper, eventName, function () {\n        var args = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n\n        callback({\n          chartWrapper: googleChartWrapper,\n          props: _this.props,\n          google: google,\n          eventArgs: args\n        });\n      });\n    };\n\n    for (var _i = 0, chartEvents_1 = chartEvents; _i < chartEvents_1.length; _i++) {\n      var event_1 = chartEvents_1[_i];\n\n      _loop_1(event_1);\n    }\n  };\n\n  GoogleChartEvents.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        google = _a.google,\n        googleChartWrapper = _a.googleChartWrapper;\n    return createElement(ContextConsumer, {\n      render: function (propsFromContext) {\n        _this.listenToEvents({\n          chartEvents: propsFromContext.chartEvents || null,\n          google: google,\n          googleChartWrapper: googleChartWrapper\n        });\n\n        return null;\n      }\n    });\n  };\n\n  return GoogleChartEvents;\n}(Component);\n\nvar controlCounter = 0;\n\nvar GoogleChart = function (_super) {\n  __extends(GoogleChart, _super);\n\n  function GoogleChart() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      googleChartWrapper: null,\n      googleChartDashboard: null,\n      googleChartControls: null,\n      googleChartEditor: null,\n      isReady: false\n    };\n    _this.graphID = null;\n    _this.dashboard_ref = createRef();\n    _this.toolbar_ref = createRef();\n\n    _this.getGraphID = function () {\n      var _a = _this.props,\n          graphID = _a.graphID,\n          graph_id = _a.graph_id;\n      var instanceGraphID;\n\n      if (graphID === null && graph_id === null) {\n        if (_this.graphID === null) {\n          instanceGraphID = generateUniqueID();\n        } else {\n          instanceGraphID = _this.graphID;\n        }\n      } else if (graphID !== null && graph_id === null) {\n        instanceGraphID = graphID;\n      } else if (graph_id !== null && graphID === null) {\n        instanceGraphID = graph_id;\n      } else {\n        instanceGraphID = graphID;\n      }\n\n      _this.graphID = instanceGraphID;\n      return _this.graphID;\n    };\n\n    _this.getControlID = function (id, index) {\n      controlCounter += 1;\n      var controlID;\n\n      if (typeof id === \"undefined\") {\n        controlID = \"googlechart-control-\" + index + \"-\" + controlCounter;\n      } else {\n        controlID = id;\n      }\n\n      return controlID;\n    };\n\n    _this.addControls = function (googleChartWrapper, googleChartDashboard) {\n      var _a = _this.props,\n          google = _a.google,\n          controls = _a.controls;\n      var googleChartControls = controls === null ? null : controls.map(function (control, i) {\n        var controlIDMaybe = control.controlID,\n            controlType = control.controlType,\n            controlOptions = control.options,\n            controlWrapperParams = control.controlWrapperParams;\n\n        var controlID = _this.getControlID(controlIDMaybe, i);\n\n        return {\n          controlProp: control,\n          control: new google.visualization.ControlWrapper(__assign({\n            containerId: controlID,\n            controlType: controlType,\n            options: controlOptions\n          }, controlWrapperParams))\n        };\n      });\n\n      if (googleChartControls === null) {\n        return null;\n      }\n\n      googleChartDashboard.bind(googleChartControls.map(function (_a) {\n        var control = _a.control;\n        return control;\n      }), googleChartWrapper);\n\n      var _loop_1 = function (chartControl) {\n        var control = chartControl.control,\n            controlProp = chartControl.controlProp;\n        var _a = controlProp.controlEvents,\n            controlEvents = _a === void 0 ? [] : _a;\n\n        var _loop_2 = function (event_1) {\n          var callback = event_1.callback,\n              eventName = event_1.eventName;\n          google.visualization.events.removeListener(control, eventName, callback);\n          google.visualization.events.addListener(control, eventName, function () {\n            var args = [];\n\n            for (var _i = 0; _i < arguments.length; _i++) {\n              args[_i] = arguments[_i];\n            }\n\n            callback({\n              chartWrapper: googleChartWrapper,\n              controlWrapper: control,\n              props: _this.props,\n              google: google,\n              eventArgs: args\n            });\n          });\n        };\n\n        for (var _i = 0, controlEvents_1 = controlEvents; _i < controlEvents_1.length; _i++) {\n          var event_1 = controlEvents_1[_i];\n\n          _loop_2(event_1);\n        }\n      };\n\n      for (var _i = 0, googleChartControls_1 = googleChartControls; _i < googleChartControls_1.length; _i++) {\n        var chartControl = googleChartControls_1[_i];\n\n        _loop_1(chartControl);\n      }\n\n      return googleChartControls;\n    };\n\n    _this.renderChart = function () {\n      var _a = _this.props,\n          width = _a.width,\n          height = _a.height,\n          options = _a.options,\n          style = _a.style,\n          className = _a.className,\n          rootProps = _a.rootProps,\n          google = _a.google;\n\n      var divStyle = __assign({\n        height: height || options && options.height,\n        width: width || options && options.width\n      }, style);\n\n      return createElement(\"div\", __assign({\n        id: _this.getGraphID(),\n        style: divStyle,\n        className: className\n      }, rootProps), _this.state.isReady && _this.state.googleChartWrapper !== null ? createElement(Fragment, null, createElement(GoogleChartDataTable, {\n        googleChartWrapper: _this.state.googleChartWrapper,\n        google: google,\n        googleChartDashboard: _this.state.googleChartDashboard\n      }), createElement(GoogleChartEvents, {\n        googleChartWrapper: _this.state.googleChartWrapper,\n        google: google\n      })) : null);\n    };\n\n    _this.renderControl = function (filter) {\n      if (filter === void 0) {\n        filter = function (_a) {\n          var control = _a.control,\n              controlProp = _a.controlProp;\n          return true;\n        };\n      }\n\n      return _this.state.isReady && _this.state.googleChartControls !== null ? createElement(Fragment, null, _this.state.googleChartControls.filter(function (_a) {\n        var controlProp = _a.controlProp,\n            control = _a.control;\n        return filter({\n          control: control,\n          controlProp: controlProp\n        });\n      }).map(function (_a) {\n        var control = _a.control,\n            controlProp = _a.controlProp;\n        return createElement(\"div\", {\n          key: control.getContainerId(),\n          id: control.getContainerId()\n        });\n      })) : null;\n    };\n\n    _this.renderToolBar = function () {\n      if (_this.props.toolbarItems === null) return null;\n      return createElement(\"div\", {\n        ref: _this.toolbar_ref\n      });\n    };\n\n    return _this;\n  }\n\n  GoogleChart.prototype.componentDidMount = function () {\n    var _a = this.props,\n        options = _a.options,\n        google = _a.google,\n        chartType = _a.chartType,\n        chartWrapperParams = _a.chartWrapperParams,\n        toolbarItems = _a.toolbarItems,\n        getChartEditor = _a.getChartEditor,\n        getChartWrapper = _a.getChartWrapper;\n\n    var chartConfig = __assign({\n      chartType: chartType,\n      options: options,\n      containerId: this.getGraphID()\n    }, chartWrapperParams);\n\n    var googleChartWrapper = new google.visualization.ChartWrapper(chartConfig);\n    googleChartWrapper.setOptions(options);\n    getChartWrapper(googleChartWrapper, google);\n    var googleChartDashboard = new google.visualization.Dashboard(this.dashboard_ref);\n    var googleChartControls = this.addControls(googleChartWrapper, googleChartDashboard);\n\n    if (toolbarItems !== null) {\n      google.visualization.drawToolbar(this.toolbar_ref.current, toolbarItems);\n    }\n\n    var googleChartEditor = null;\n\n    if (getChartEditor !== null) {\n      googleChartEditor = new google.visualization.ChartEditor();\n      getChartEditor({\n        chartEditor: googleChartEditor,\n        chartWrapper: googleChartWrapper,\n        google: google\n      });\n    }\n\n    this.setState({\n      googleChartEditor: googleChartEditor,\n      googleChartControls: googleChartControls,\n      googleChartDashboard: googleChartDashboard,\n      googleChartWrapper: googleChartWrapper,\n      isReady: true\n    });\n  };\n\n  GoogleChart.prototype.componentDidUpdate = function () {\n    if (this.state.googleChartWrapper === null) return;\n    if (this.state.googleChartDashboard === null) return;\n    if (this.state.googleChartControls === null) return;\n    var controls = this.props.controls;\n\n    for (var i = 0; i < controls.length; i += 1) {\n      var _a = controls[i],\n          controlType = _a.controlType,\n          options = _a.options,\n          controlWrapperParams = _a.controlWrapperParams;\n\n      if (controlWrapperParams && \"state\" in controlWrapperParams) {\n        this.state.googleChartControls[i].control.setState(controlWrapperParams[\"state\"]);\n      }\n\n      this.state.googleChartControls[i].control.setOptions(options);\n      this.state.googleChartControls[i].control.setControlType(controlType);\n    }\n  };\n\n  GoogleChart.prototype.shouldComponentUpdate = function (nextProps, nextState) {\n    return this.state.isReady !== nextState.isReady || nextProps.controls !== this.props.controls;\n  };\n\n  GoogleChart.prototype.render = function () {\n    var _a = this.props,\n        width = _a.width,\n        height = _a.height,\n        options = _a.options,\n        style = _a.style;\n\n    var divStyle = __assign({\n      height: height || options && options.height,\n      width: width || options && options.width\n    }, style);\n\n    if (this.props.render !== null) {\n      return createElement(\"div\", {\n        ref: this.dashboard_ref,\n        style: divStyle\n      }, createElement(\"div\", {\n        ref: this.toolbar_ref,\n        id: \"toolbar\"\n      }), this.props.render({\n        renderChart: this.renderChart,\n        renderControl: this.renderControl,\n        renderToolbar: this.renderToolBar\n      }));\n    } else {\n      return createElement(\"div\", {\n        ref: this.dashboard_ref,\n        style: divStyle\n      }, this.renderControl(function (_a) {\n        var controlProp = _a.controlProp;\n        return controlProp.controlPosition !== \"bottom\";\n      }), this.renderChart(), this.renderControl(function (_a) {\n        var controlProp = _a.controlProp;\n        return controlProp.controlPosition === \"bottom\";\n      }), this.renderToolBar());\n    }\n  };\n\n  return GoogleChart;\n}(Component);\n\nvar Chart = function (_super) {\n  __extends(Chart, _super);\n\n  function Chart() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._isMounted = false;\n    _this.state = {\n      loadingStatus: \"loading\",\n      google: null\n    };\n\n    _this.onLoad = function (google) {\n      if (_this.isFullyLoaded(google)) {\n        _this.onSuccess(google);\n      } else {\n        var id_1 = setInterval(function () {\n          var google = window.google;\n\n          if (_this._isMounted) {\n            if (google && _this.isFullyLoaded(google)) {\n              clearInterval(id_1);\n\n              _this.onSuccess(google);\n            }\n          } else {\n            clearInterval(id_1);\n          }\n        }, 1000);\n      }\n    };\n\n    _this.onSuccess = function (google) {\n      _this.setState({\n        loadingStatus: \"ready\",\n        google: google\n      });\n    };\n\n    _this.onError = function () {\n      _this.setState({\n        loadingStatus: \"errored\"\n      });\n    };\n\n    return _this;\n  }\n\n  Chart.prototype.render = function () {\n    var _a = this.props,\n        chartLanguage = _a.chartLanguage,\n        chartPackages = _a.chartPackages,\n        chartVersion = _a.chartVersion,\n        mapsApiKey = _a.mapsApiKey,\n        loader = _a.loader,\n        errorElement = _a.errorElement;\n    return createElement(ContextProvider, {\n      value: this.props\n    }, this.state.loadingStatus === \"ready\" && this.state.google !== null ? createElement(GoogleChart, __assign({}, this.props, {\n      google: this.state.google\n    })) : this.state.loadingStatus === \"errored\" && errorElement ? errorElement : loader, createElement(GoogleChartLoader, __assign({}, {\n      chartLanguage: chartLanguage,\n      chartPackages: chartPackages,\n      chartVersion: chartVersion,\n      mapsApiKey: mapsApiKey\n    }, {\n      onLoad: this.onLoad,\n      onError: this.onError\n    })));\n  };\n\n  Chart.prototype.componentDidMount = function () {\n    this._isMounted = true;\n  };\n\n  Chart.prototype.componentWillUnmount = function () {\n    this._isMounted = false;\n  };\n\n  Chart.prototype.isFullyLoaded = function (google) {\n    var _a = this.props,\n        controls = _a.controls,\n        toolbarItems = _a.toolbarItems,\n        getChartEditor = _a.getChartEditor;\n    return google && google.visualization && google.visualization.ChartWrapper && google.visualization.Dashboard && (!controls || google.visualization.ChartWrapper) && (!getChartEditor || google.visualization.ChartEditor) && (!toolbarItems || google.visualization.drawToolbar);\n  };\n\n  Chart.defaultProps = chartDefaultProps;\n  return Chart;\n}(Component);\n\nexport default Chart;\nexport { Chart };","map":{"version":3,"sources":["D:/Projects/CZ3002-Lab-SmartLib/CZ3002_Xeon/Front-End/node_modules/react-google-charts/dist/index.esm.js"],"names":["createElement","Component","createRef","Fragment","createContext","Script","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","pop","push","chartDefaultProps","graph_id","legend_toggle","graphID","options","colors","data","rows","columns","diffdata","chartEvents","legendToggle","chartActions","getChartWrapper","chartWrapper","google","getChartEditor","className","style","formatters","spreadSheetUrl","spreadSheetQueryParameters","headers","gid","rootProps","chartWrapperParams","controls","render","toolbarItems","toolbarID","GoogleChartLoader","_super","_this","handleGoogleChartsLoaderScriptLoaded","windowGoogleCharts","_a","props","version","chartVersion","packages","chartPackages","language","chartLanguage","mapsApiKey","onLoad","charts","load","setOnLoadCallback","shouldComponentUpdate","nextProps","onError","url","windowWithGoogle","window","uniqueID","generateUniqueID","DEFAULT_CHART_COLORS","undefined","loadDataTableFromSpreadSheet","googleViz","urlParams","queryString","query","encodeURIComponent","sheet","access_token","urlQueryString","urlToSpreadSheet","visualization","Query","send","response","isError","getMessage","getDetailedMessage","getDataTable","Provider","Consumer","ContextProvider","children","ContextConsumer","context","GRAY_COLOR","GoogleChartDataTableInner","state","hiddenColumns","listenToLegendToggle","googleChartWrapper","events","addListener","chart","getChart","selection","getSelection","dataTable","row","columnIndex","column","columnID","getColumnID","includes","setState","filter","colID","slice","concat","applyFormatters","_i","formatters_1","formatter","type","vizFormatter","ArrowFormat","format","BarFormat","ColorFormat","ranges","ranges_1","range","addRange","DateFormat","NumberFormat","PatternFormat","getColumnId","getColumnLabel","draw","chartType","_b","chartDiff","oldData","newData","columnCount","previousColumnLabel","previousColumnID","previousColumnType","_c","arrayToDataTable","old","new","computeDiff","isArray","DataTable","getNumberOfColumns","getColumnType","removeColumn","addColumn","id","getChartType","clearChart","setChartType","setOptions","setDataTable","googleChartDashboard","grayOutHiddenColumns","hasAHiddenColumn","from","map","dontcare","onResize","componentDidMount","addEventListener","componentWillUnmount","removeEventListener","removeAllListeners","componentDidUpdate","GoogleChartDataTable","GoogleChartEvents","listenToEvents","_loop_1","event_1","eventName","callback","args","eventArgs","chartEvents_1","propsFromContext","controlCounter","GoogleChart","googleChartControls","googleChartEditor","isReady","dashboard_ref","toolbar_ref","getGraphID","instanceGraphID","getControlID","index","controlID","addControls","control","controlIDMaybe","controlType","controlOptions","controlWrapperParams","controlProp","ControlWrapper","containerId","bind","chartControl","controlEvents","_loop_2","removeListener","controlWrapper","controlEvents_1","googleChartControls_1","renderChart","width","height","divStyle","renderControl","key","getContainerId","renderToolBar","ref","chartConfig","ChartWrapper","Dashboard","drawToolbar","current","ChartEditor","chartEditor","setControlType","nextState","renderToolbar","controlPosition","Chart","_isMounted","loadingStatus","isFullyLoaded","onSuccess","id_1","setInterval","clearInterval","loader","errorElement","defaultProps"],"mappings":"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","sourcesContent":["import { createElement, Component, createRef, Fragment, createContext } from 'react';\nimport Script from 'react-load-script';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\n\nvar chartDefaultProps = {\r\n    graph_id: null,\r\n    legend_toggle: false,\r\n    graphID: null,\r\n    options: {\r\n        colors: null\r\n    },\r\n    data: null,\r\n    rows: null,\r\n    columns: null,\r\n    diffdata: null,\r\n    chartEvents: null,\r\n    legendToggle: false,\r\n    chartActions: null,\r\n    getChartWrapper: function (chartWrapper, google) { },\r\n    getChartEditor: null,\r\n    className: \"\",\r\n    style: {},\r\n    formatters: null,\r\n    spreadSheetUrl: null,\r\n    spreadSheetQueryParameters: {\r\n        headers: 1,\r\n        gid: 1\r\n    },\r\n    rootProps: {},\r\n    chartWrapperParams: {},\r\n    controls: null,\r\n    render: null,\r\n    toolbarItems: null,\r\n    toolbarID: null\r\n};\n\nvar GoogleChartLoader = (function (_super) {\r\n    __extends(GoogleChartLoader, _super);\r\n    function GoogleChartLoader() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.handleGoogleChartsLoaderScriptLoaded = function (windowGoogleCharts) {\r\n            var _a = _this.props, version = _a.chartVersion, packages = _a.chartPackages, language = _a.chartLanguage, mapsApiKey = _a.mapsApiKey, onLoad = _a.onLoad;\r\n            windowGoogleCharts.charts.load(version || \"current\", {\r\n                packages: packages || [\"corechart\", \"controls\"],\r\n                language: language || \"en\",\r\n                mapsApiKey: mapsApiKey\r\n            });\r\n            windowGoogleCharts.charts.setOnLoadCallback(function () {\r\n                onLoad(windowGoogleCharts);\r\n            });\r\n        };\r\n        return _this;\r\n    }\r\n    GoogleChartLoader.prototype.shouldComponentUpdate = function (nextProps) {\r\n        return nextProps.chartPackages === this.props.chartPackages;\r\n    };\r\n    GoogleChartLoader.prototype.render = function () {\r\n        var _this = this;\r\n        var onError = this.props.onError;\r\n        return (createElement(Script, { url: \"https://www.gstatic.com/charts/loader.js\", onError: onError, onLoad: function () {\r\n                var windowWithGoogle = window;\r\n                if (windowWithGoogle.google) {\r\n                    _this.handleGoogleChartsLoaderScriptLoaded(windowWithGoogle.google);\r\n                }\r\n            } }));\r\n    };\r\n    return GoogleChartLoader;\r\n}(Component));\n\nvar uniqueID = 0;\r\nvar generateUniqueID = function () {\r\n    uniqueID += 1;\r\n    return \"reactgooglegraph-\" + uniqueID;\r\n};\n\nvar DEFAULT_CHART_COLORS = [\r\n    \"#3366CC\",\r\n    \"#DC3912\",\r\n    \"#FF9900\",\r\n    \"#109618\",\r\n    \"#990099\",\r\n    \"#3B3EAC\",\r\n    \"#0099C6\",\r\n    \"#DD4477\",\r\n    \"#66AA00\",\r\n    \"#B82E2E\",\r\n    \"#316395\",\r\n    \"#994499\",\r\n    \"#22AA99\",\r\n    \"#AAAA11\",\r\n    \"#6633CC\",\r\n    \"#E67300\",\r\n    \"#8B0707\",\r\n    \"#329262\",\r\n    \"#5574A6\",\r\n    \"#3B3EAC\"\r\n];\n\nvar _this = undefined;\r\nvar loadDataTableFromSpreadSheet = function (googleViz, spreadSheetUrl, urlParams) {\r\n    if (urlParams === void 0) { urlParams = {}; }\r\n    return __awaiter(_this, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            return [2, new Promise(function (resolve, reject) {\r\n                    var headers = \"\" + (urlParams.headers ? \"headers=\" + urlParams.headers : \"headers=0\");\r\n                    var queryString = \"\" + (urlParams.query ? \"&tq=\" + encodeURIComponent(urlParams.query) : \"\");\r\n                    var gid = \"\" + (urlParams.gid ? \"&gid=\" + urlParams.gid : \"\");\r\n                    var sheet = \"\" + (urlParams.sheet ? \"&sheet=\" + urlParams.sheet : \"\");\r\n                    var access_token = \"\" + (urlParams.access_token ? \"&access_token=\" + urlParams.access_token : \"\");\r\n                    var urlQueryString = \"\" + headers + gid + sheet + queryString + access_token;\r\n                    var urlToSpreadSheet = spreadSheetUrl + \"/gviz/tq?\" + urlQueryString;\r\n                    var query = new googleViz.visualization.Query(urlToSpreadSheet);\r\n                    query.send(function (response) {\r\n                        if (response.isError()) {\r\n                            reject(\"Error in query:  \" + response.getMessage() + \" \" + response.getDetailedMessage());\r\n                        }\r\n                        else {\r\n                            resolve(response.getDataTable());\r\n                        }\r\n                    });\r\n                })];\r\n        });\r\n    });\r\n};\n\nvar _a = createContext(chartDefaultProps), Provider = _a.Provider, Consumer = _a.Consumer;\r\nvar ContextProvider = function (_a) {\r\n    var children = _a.children, value = _a.value;\r\n    return createElement(Provider, { value: value }, children);\r\n};\r\nvar ContextConsumer = function (_a) {\r\n    var render = _a.render;\r\n    return (createElement(Consumer, null, function (context) {\r\n        return render(context);\r\n    }));\r\n};\n\nvar GRAY_COLOR = \"#CCCCCC\";\r\nvar GoogleChartDataTableInner = (function (_super) {\r\n    __extends(GoogleChartDataTableInner, _super);\r\n    function GoogleChartDataTableInner() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.state = {\r\n            hiddenColumns: []\r\n        };\r\n        _this.listenToLegendToggle = function () {\r\n            var _a = _this.props, google = _a.google, googleChartWrapper = _a.googleChartWrapper;\r\n            google.visualization.events.addListener(googleChartWrapper, \"select\", function () {\r\n                var chart = googleChartWrapper.getChart();\r\n                var selection = chart.getSelection();\r\n                var dataTable = googleChartWrapper.getDataTable();\r\n                if (selection.length === 0 ||\r\n                    selection[0].row !== null ||\r\n                    dataTable === null) {\r\n                    return;\r\n                }\r\n                var columnIndex = selection[0].column;\r\n                var columnID = _this.getColumnID(dataTable, columnIndex);\r\n                if (_this.state.hiddenColumns.includes(columnID)) {\r\n                    _this.setState(function (state) { return (__assign({}, state, { hiddenColumns: state.hiddenColumns.filter(function (colID) { return colID !== columnID; }).slice() })); });\r\n                }\r\n                else {\r\n                    _this.setState(function (state) { return (__assign({}, state, { hiddenColumns: state.hiddenColumns.concat([columnID]) })); });\r\n                }\r\n            });\r\n        };\r\n        _this.applyFormatters = function (dataTable, formatters) {\r\n            var google = _this.props.google;\r\n            for (var _i = 0, formatters_1 = formatters; _i < formatters_1.length; _i++) {\r\n                var formatter = formatters_1[_i];\r\n                switch (formatter.type) {\r\n                    case \"ArrowFormat\": {\r\n                        var vizFormatter = new google.visualization.ArrowFormat(formatter.options);\r\n                        vizFormatter.format(dataTable, formatter.column);\r\n                        break;\r\n                    }\r\n                    case \"BarFormat\": {\r\n                        var vizFormatter = new google.visualization.BarFormat(formatter.options);\r\n                        vizFormatter.format(dataTable, formatter.column);\r\n                        break;\r\n                    }\r\n                    case \"ColorFormat\": {\r\n                        var vizFormatter = new google.visualization.ColorFormat(formatter.options);\r\n                        var ranges = formatter.ranges;\r\n                        for (var _a = 0, ranges_1 = ranges; _a < ranges_1.length; _a++) {\r\n                            var range = ranges_1[_a];\r\n                            vizFormatter.addRange.apply(vizFormatter, range);\r\n                        }\r\n                        vizFormatter.format(dataTable, formatter.column);\r\n                        break;\r\n                    }\r\n                    case \"DateFormat\": {\r\n                        var vizFormatter = new google.visualization.DateFormat(formatter.options);\r\n                        vizFormatter.format(dataTable, formatter.column);\r\n                        break;\r\n                    }\r\n                    case \"NumberFormat\": {\r\n                        var vizFormatter = new google.visualization.NumberFormat(formatter.options);\r\n                        vizFormatter.format(dataTable, formatter.column);\r\n                        break;\r\n                    }\r\n                    case \"PatternFormat\": {\r\n                        var vizFormatter = new google.visualization.PatternFormat(formatter.options);\r\n                        vizFormatter.format(dataTable, formatter.column);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        _this.getColumnID = function (dataTable, columnIndex) {\r\n            return (dataTable.getColumnId(columnIndex) ||\r\n                dataTable.getColumnLabel(columnIndex));\r\n        };\r\n        _this.draw = function (_a) {\r\n            var data = _a.data, diffdata = _a.diffdata, rows = _a.rows, columns = _a.columns, options = _a.options, legend_toggle = _a.legend_toggle, legendToggle = _a.legendToggle, chartType = _a.chartType, formatters = _a.formatters, spreadSheetUrl = _a.spreadSheetUrl, spreadSheetQueryParameters = _a.spreadSheetQueryParameters;\r\n            return __awaiter(_this, void 0, void 0, function () {\r\n                var _b, google, googleChartWrapper, dataTable, chartDiff, oldData, newData, columnCount, i, columnID, previousColumnLabel, previousColumnID, previousColumnType, chart;\r\n                return __generator(this, function (_c) {\r\n                    switch (_c.label) {\r\n                        case 0:\r\n                            _b = this.props, google = _b.google, googleChartWrapper = _b.googleChartWrapper;\r\n                            chartDiff = null;\r\n                            if (diffdata !== null) {\r\n                                oldData = google.visualization.arrayToDataTable(diffdata.old);\r\n                                newData = google.visualization.arrayToDataTable(diffdata.new);\r\n                                chartDiff = google.visualization[chartType].prototype.computeDiff(oldData, newData);\r\n                            }\r\n                            if (!(data !== null)) return [3, 1];\r\n                            if (Array.isArray(data)) {\r\n                                dataTable = google.visualization.arrayToDataTable(data);\r\n                            }\r\n                            else {\r\n                                dataTable = new google.visualization.DataTable(data);\r\n                            }\r\n                            return [3, 5];\r\n                        case 1:\r\n                            if (!(rows !== null && columns !== null)) return [3, 2];\r\n                            dataTable = google.visualization.arrayToDataTable([columns].concat(rows));\r\n                            return [3, 5];\r\n                        case 2:\r\n                            if (!(spreadSheetUrl !== null)) return [3, 4];\r\n                            return [4, loadDataTableFromSpreadSheet(google, spreadSheetUrl, spreadSheetQueryParameters)];\r\n                        case 3:\r\n                            dataTable = (_c.sent());\r\n                            return [3, 5];\r\n                        case 4:\r\n                            dataTable = google.visualization.arrayToDataTable([]);\r\n                            _c.label = 5;\r\n                        case 5:\r\n                            columnCount = dataTable.getNumberOfColumns();\r\n                            for (i = 0; i < columnCount; i += 1) {\r\n                                columnID = this.getColumnID(dataTable, i);\r\n                                if (this.state.hiddenColumns.includes(columnID)) {\r\n                                    previousColumnLabel = dataTable.getColumnLabel(i);\r\n                                    previousColumnID = dataTable.getColumnId(i);\r\n                                    previousColumnType = dataTable.getColumnType(i);\r\n                                    dataTable.removeColumn(i);\r\n                                    dataTable.addColumn({\r\n                                        label: previousColumnLabel,\r\n                                        id: previousColumnID,\r\n                                        type: previousColumnType\r\n                                    });\r\n                                }\r\n                            }\r\n                            chart = googleChartWrapper.getChart();\r\n                            if (googleChartWrapper.getChartType() === \"Timeline\") {\r\n                                chart && chart.clearChart();\r\n                            }\r\n                            googleChartWrapper.setChartType(chartType);\r\n                            googleChartWrapper.setOptions(options);\r\n                            googleChartWrapper.setDataTable(dataTable);\r\n                            googleChartWrapper.draw();\r\n                            if (this.props.googleChartDashboard !== null) {\r\n                                this.props.googleChartDashboard.draw(dataTable);\r\n                            }\r\n                            if (chartDiff !== null) {\r\n                                googleChartWrapper.setDataTable(chartDiff);\r\n                                googleChartWrapper.draw();\r\n                            }\r\n                            if (formatters !== null) {\r\n                                this.applyFormatters(dataTable, formatters);\r\n                                googleChartWrapper.setDataTable(dataTable);\r\n                                googleChartWrapper.draw();\r\n                            }\r\n                            if (legendToggle === true || legend_toggle === true) {\r\n                                this.grayOutHiddenColumns({ options: options });\r\n                            }\r\n                            return [2];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        _this.grayOutHiddenColumns = function (_a) {\r\n            var options = _a.options;\r\n            var googleChartWrapper = _this.props.googleChartWrapper;\r\n            var dataTable = googleChartWrapper.getDataTable();\r\n            if (dataTable === null)\r\n                return;\r\n            var columnCount = dataTable.getNumberOfColumns();\r\n            var hasAHiddenColumn = _this.state.hiddenColumns.length > 0;\r\n            if (hasAHiddenColumn === false)\r\n                return;\r\n            var colors = Array.from({ length: columnCount - 1 }).map(function (dontcare, i) {\r\n                var columnID = _this.getColumnID(dataTable, i + 1);\r\n                if (_this.state.hiddenColumns.includes(columnID)) {\r\n                    return GRAY_COLOR;\r\n                }\r\n                else if (typeof options.colors !== \"undefined\" &&\r\n                    options.colors !== null) {\r\n                    return options.colors[i];\r\n                }\r\n                else {\r\n                    return DEFAULT_CHART_COLORS[i];\r\n                }\r\n            });\r\n            googleChartWrapper.setOptions(__assign({}, options, { colors: colors }));\r\n            googleChartWrapper.draw();\r\n        };\r\n        _this.onResize = function () {\r\n            var googleChartWrapper = _this.props.googleChartWrapper;\r\n            googleChartWrapper.draw();\r\n        };\r\n        return _this;\r\n    }\r\n    GoogleChartDataTableInner.prototype.componentDidMount = function () {\r\n        this.draw(this.props);\r\n        window.addEventListener(\"resize\", this.onResize);\r\n        if (this.props.legend_toggle || this.props.legendToggle) {\r\n            this.listenToLegendToggle();\r\n        }\r\n    };\r\n    GoogleChartDataTableInner.prototype.componentWillUnmount = function () {\r\n        var _a = this.props, google = _a.google, googleChartWrapper = _a.googleChartWrapper;\r\n        window.removeEventListener(\"resize\", this.onResize);\r\n        google.visualization.events.removeAllListeners(googleChartWrapper);\r\n        if (googleChartWrapper.getChartType() === \"Timeline\") {\r\n            googleChartWrapper.getChart() &&\r\n                googleChartWrapper.getChart().clearChart();\r\n        }\r\n    };\r\n    GoogleChartDataTableInner.prototype.componentDidUpdate = function () {\r\n        this.draw(this.props);\r\n    };\r\n    GoogleChartDataTableInner.prototype.render = function () {\r\n        return null;\r\n    };\r\n    return GoogleChartDataTableInner;\r\n}(Component));\r\nvar GoogleChartDataTable = (function (_super) {\r\n    __extends(GoogleChartDataTable, _super);\r\n    function GoogleChartDataTable() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    GoogleChartDataTable.prototype.componentDidMount = function () { };\r\n    GoogleChartDataTable.prototype.componentWillUnmount = function () { };\r\n    GoogleChartDataTable.prototype.shouldComponentUpdate = function () {\r\n        return false;\r\n    };\r\n    GoogleChartDataTable.prototype.render = function () {\r\n        var _a = this.props, google = _a.google, googleChartWrapper = _a.googleChartWrapper, googleChartDashboard = _a.googleChartDashboard;\r\n        return (createElement(ContextConsumer, { render: function (props) {\r\n                return (createElement(GoogleChartDataTableInner, __assign({}, props, { google: google, googleChartWrapper: googleChartWrapper, googleChartDashboard: googleChartDashboard })));\r\n            } }));\r\n    };\r\n    return GoogleChartDataTable;\r\n}(Component));\n\nvar GoogleChartEvents = (function (_super) {\r\n    __extends(GoogleChartEvents, _super);\r\n    function GoogleChartEvents() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    GoogleChartEvents.prototype.shouldComponentUpdate = function () {\r\n        return false;\r\n    };\r\n    GoogleChartEvents.prototype.listenToEvents = function (_a) {\r\n        var _this = this;\r\n        var chartEvents = _a.chartEvents, google = _a.google, googleChartWrapper = _a.googleChartWrapper;\r\n        if (chartEvents === null) {\r\n            return;\r\n        }\r\n        google.visualization.events.removeAllListeners(googleChartWrapper);\r\n        var _loop_1 = function (event_1) {\r\n            var eventName = event_1.eventName, callback = event_1.callback;\r\n            google.visualization.events.addListener(googleChartWrapper, eventName, function () {\r\n                var args = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    args[_i] = arguments[_i];\r\n                }\r\n                callback({\r\n                    chartWrapper: googleChartWrapper,\r\n                    props: _this.props,\r\n                    google: google,\r\n                    eventArgs: args\r\n                });\r\n            });\r\n        };\r\n        for (var _i = 0, chartEvents_1 = chartEvents; _i < chartEvents_1.length; _i++) {\r\n            var event_1 = chartEvents_1[_i];\r\n            _loop_1(event_1);\r\n        }\r\n    };\r\n    GoogleChartEvents.prototype.render = function () {\r\n        var _this = this;\r\n        var _a = this.props, google = _a.google, googleChartWrapper = _a.googleChartWrapper;\r\n        return (createElement(ContextConsumer, { render: function (propsFromContext) {\r\n                _this.listenToEvents({\r\n                    chartEvents: propsFromContext.chartEvents || null,\r\n                    google: google,\r\n                    googleChartWrapper: googleChartWrapper\r\n                });\r\n                return null;\r\n            } }));\r\n    };\r\n    return GoogleChartEvents;\r\n}(Component));\n\nvar controlCounter = 0;\r\nvar GoogleChart = (function (_super) {\r\n    __extends(GoogleChart, _super);\r\n    function GoogleChart() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.state = {\r\n            googleChartWrapper: null,\r\n            googleChartDashboard: null,\r\n            googleChartControls: null,\r\n            googleChartEditor: null,\r\n            isReady: false\r\n        };\r\n        _this.graphID = null;\r\n        _this.dashboard_ref = createRef();\r\n        _this.toolbar_ref = createRef();\r\n        _this.getGraphID = function () {\r\n            var _a = _this.props, graphID = _a.graphID, graph_id = _a.graph_id;\r\n            var instanceGraphID;\r\n            if (graphID === null && graph_id === null) {\r\n                if (_this.graphID === null) {\r\n                    instanceGraphID = generateUniqueID();\r\n                }\r\n                else {\r\n                    instanceGraphID = _this.graphID;\r\n                }\r\n            }\r\n            else if (graphID !== null && graph_id === null) {\r\n                instanceGraphID = graphID;\r\n            }\r\n            else if (graph_id !== null && graphID === null) {\r\n                instanceGraphID = graph_id;\r\n            }\r\n            else {\r\n                instanceGraphID = graphID;\r\n            }\r\n            _this.graphID = instanceGraphID;\r\n            return _this.graphID;\r\n        };\r\n        _this.getControlID = function (id, index) {\r\n            controlCounter += 1;\r\n            var controlID;\r\n            if (typeof id === \"undefined\") {\r\n                controlID = \"googlechart-control-\" + index + \"-\" + controlCounter;\r\n            }\r\n            else {\r\n                controlID = id;\r\n            }\r\n            return controlID;\r\n        };\r\n        _this.addControls = function (googleChartWrapper, googleChartDashboard) {\r\n            var _a = _this.props, google = _a.google, controls = _a.controls;\r\n            var googleChartControls = controls === null\r\n                ? null\r\n                : controls.map(function (control, i) {\r\n                    var controlIDMaybe = control.controlID, controlType = control.controlType, controlOptions = control.options, controlWrapperParams = control.controlWrapperParams;\r\n                    var controlID = _this.getControlID(controlIDMaybe, i);\r\n                    return {\r\n                        controlProp: control,\r\n                        control: new google.visualization.ControlWrapper(__assign({ containerId: controlID, controlType: controlType, options: controlOptions }, controlWrapperParams))\r\n                    };\r\n                });\r\n            if (googleChartControls === null) {\r\n                return null;\r\n            }\r\n            googleChartDashboard.bind(googleChartControls.map(function (_a) {\r\n                var control = _a.control;\r\n                return control;\r\n            }), googleChartWrapper);\r\n            var _loop_1 = function (chartControl) {\r\n                var control = chartControl.control, controlProp = chartControl.controlProp;\r\n                var _a = controlProp.controlEvents, controlEvents = _a === void 0 ? [] : _a;\r\n                var _loop_2 = function (event_1) {\r\n                    var callback = event_1.callback, eventName = event_1.eventName;\r\n                    google.visualization.events.removeListener(control, eventName, callback);\r\n                    google.visualization.events.addListener(control, eventName, function () {\r\n                        var args = [];\r\n                        for (var _i = 0; _i < arguments.length; _i++) {\r\n                            args[_i] = arguments[_i];\r\n                        }\r\n                        callback({\r\n                            chartWrapper: googleChartWrapper,\r\n                            controlWrapper: control,\r\n                            props: _this.props,\r\n                            google: google,\r\n                            eventArgs: args\r\n                        });\r\n                    });\r\n                };\r\n                for (var _i = 0, controlEvents_1 = controlEvents; _i < controlEvents_1.length; _i++) {\r\n                    var event_1 = controlEvents_1[_i];\r\n                    _loop_2(event_1);\r\n                }\r\n            };\r\n            for (var _i = 0, googleChartControls_1 = googleChartControls; _i < googleChartControls_1.length; _i++) {\r\n                var chartControl = googleChartControls_1[_i];\r\n                _loop_1(chartControl);\r\n            }\r\n            return googleChartControls;\r\n        };\r\n        _this.renderChart = function () {\r\n            var _a = _this.props, width = _a.width, height = _a.height, options = _a.options, style = _a.style, className = _a.className, rootProps = _a.rootProps, google = _a.google;\r\n            var divStyle = __assign({ height: height || (options && options.height), width: width || (options && options.width) }, style);\r\n            return (createElement(\"div\", __assign({ id: _this.getGraphID(), style: divStyle, className: className }, rootProps), _this.state.isReady && _this.state.googleChartWrapper !== null ? (createElement(Fragment, null,\r\n                createElement(GoogleChartDataTable, { googleChartWrapper: _this.state.googleChartWrapper, google: google, googleChartDashboard: _this.state.googleChartDashboard }),\r\n                createElement(GoogleChartEvents, { googleChartWrapper: _this.state.googleChartWrapper, google: google }))) : null));\r\n        };\r\n        _this.renderControl = function (filter) {\r\n            if (filter === void 0) { filter = function (_a) {\r\n                var control = _a.control, controlProp = _a.controlProp;\r\n                return true;\r\n            }; }\r\n            return _this.state.isReady && _this.state.googleChartControls !== null ? (createElement(Fragment, null, _this.state.googleChartControls\r\n                .filter(function (_a) {\r\n                var controlProp = _a.controlProp, control = _a.control;\r\n                return filter({ control: control, controlProp: controlProp });\r\n            })\r\n                .map(function (_a) {\r\n                var control = _a.control, controlProp = _a.controlProp;\r\n                return (createElement(\"div\", { key: control.getContainerId(), id: control.getContainerId() }));\r\n            }))) : null;\r\n        };\r\n        _this.renderToolBar = function () {\r\n            if (_this.props.toolbarItems === null)\r\n                return null;\r\n            return createElement(\"div\", { ref: _this.toolbar_ref });\r\n        };\r\n        return _this;\r\n    }\r\n    GoogleChart.prototype.componentDidMount = function () {\r\n        var _a = this.props, options = _a.options, google = _a.google, chartType = _a.chartType, chartWrapperParams = _a.chartWrapperParams, toolbarItems = _a.toolbarItems, getChartEditor = _a.getChartEditor, getChartWrapper = _a.getChartWrapper;\r\n        var chartConfig = __assign({ chartType: chartType,\r\n            options: options, containerId: this.getGraphID() }, chartWrapperParams);\r\n        var googleChartWrapper = new google.visualization.ChartWrapper(chartConfig);\r\n        googleChartWrapper.setOptions(options);\r\n        getChartWrapper(googleChartWrapper, google);\r\n        var googleChartDashboard = new google.visualization.Dashboard(this.dashboard_ref);\r\n        var googleChartControls = this.addControls(googleChartWrapper, googleChartDashboard);\r\n        if (toolbarItems !== null) {\r\n            google.visualization.drawToolbar(this.toolbar_ref.current, toolbarItems);\r\n        }\r\n        var googleChartEditor = null;\r\n        if (getChartEditor !== null) {\r\n            googleChartEditor = new google.visualization.ChartEditor();\r\n            getChartEditor({\r\n                chartEditor: googleChartEditor,\r\n                chartWrapper: googleChartWrapper,\r\n                google: google\r\n            });\r\n        }\r\n        this.setState({\r\n            googleChartEditor: googleChartEditor,\r\n            googleChartControls: googleChartControls,\r\n            googleChartDashboard: googleChartDashboard,\r\n            googleChartWrapper: googleChartWrapper,\r\n            isReady: true\r\n        });\r\n    };\r\n    GoogleChart.prototype.componentDidUpdate = function () {\r\n        if (this.state.googleChartWrapper === null)\r\n            return;\r\n        if (this.state.googleChartDashboard === null)\r\n            return;\r\n        if (this.state.googleChartControls === null)\r\n            return;\r\n        var controls = this.props.controls;\r\n        for (var i = 0; i < controls.length; i += 1) {\r\n            var _a = controls[i], controlType = _a.controlType, options = _a.options, controlWrapperParams = _a.controlWrapperParams;\r\n            if (controlWrapperParams && \"state\" in controlWrapperParams) {\r\n                this.state.googleChartControls[i].control.setState(controlWrapperParams[\"state\"]);\r\n            }\r\n            this.state.googleChartControls[i].control.setOptions(options);\r\n            this.state.googleChartControls[i].control.setControlType(controlType);\r\n        }\r\n    };\r\n    GoogleChart.prototype.shouldComponentUpdate = function (nextProps, nextState) {\r\n        return (this.state.isReady !== nextState.isReady ||\r\n            nextProps.controls !== this.props.controls);\r\n    };\r\n    GoogleChart.prototype.render = function () {\r\n        var _a = this.props, width = _a.width, height = _a.height, options = _a.options, style = _a.style;\r\n        var divStyle = __assign({ height: height || (options && options.height), width: width || (options && options.width) }, style);\r\n        if (this.props.render !== null) {\r\n            return (createElement(\"div\", { ref: this.dashboard_ref, style: divStyle },\r\n                createElement(\"div\", { ref: this.toolbar_ref, id: \"toolbar\" }),\r\n                this.props.render({\r\n                    renderChart: this.renderChart,\r\n                    renderControl: this.renderControl,\r\n                    renderToolbar: this.renderToolBar\r\n                })));\r\n        }\r\n        else {\r\n            return (createElement(\"div\", { ref: this.dashboard_ref, style: divStyle },\r\n                this.renderControl(function (_a) {\r\n                    var controlProp = _a.controlProp;\r\n                    return controlProp.controlPosition !== \"bottom\";\r\n                }),\r\n                this.renderChart(),\r\n                this.renderControl(function (_a) {\r\n                    var controlProp = _a.controlProp;\r\n                    return controlProp.controlPosition === \"bottom\";\r\n                }),\r\n                this.renderToolBar()));\r\n        }\r\n    };\r\n    return GoogleChart;\r\n}(Component));\n\nvar Chart = (function (_super) {\r\n    __extends(Chart, _super);\r\n    function Chart() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._isMounted = false;\r\n        _this.state = {\r\n            loadingStatus: \"loading\",\r\n            google: null\r\n        };\r\n        _this.onLoad = function (google) {\r\n            if (_this.isFullyLoaded(google)) {\r\n                _this.onSuccess(google);\r\n            }\r\n            else {\r\n                var id_1 = setInterval(function () {\r\n                    var google = window.google;\r\n                    if (_this._isMounted) {\r\n                        if (google && _this.isFullyLoaded(google)) {\r\n                            clearInterval(id_1);\r\n                            _this.onSuccess(google);\r\n                        }\r\n                    }\r\n                    else {\r\n                        clearInterval(id_1);\r\n                    }\r\n                }, 1000);\r\n            }\r\n        };\r\n        _this.onSuccess = function (google) {\r\n            _this.setState({\r\n                loadingStatus: \"ready\",\r\n                google: google\r\n            });\r\n        };\r\n        _this.onError = function () {\r\n            _this.setState({\r\n                loadingStatus: \"errored\"\r\n            });\r\n        };\r\n        return _this;\r\n    }\r\n    Chart.prototype.render = function () {\r\n        var _a = this.props, chartLanguage = _a.chartLanguage, chartPackages = _a.chartPackages, chartVersion = _a.chartVersion, mapsApiKey = _a.mapsApiKey, loader = _a.loader, errorElement = _a.errorElement;\r\n        return (createElement(ContextProvider, { value: this.props },\r\n            this.state.loadingStatus === \"ready\" && this.state.google !== null ? (createElement(GoogleChart, __assign({}, this.props, { google: this.state.google }))) : this.state.loadingStatus === \"errored\" && errorElement ? (errorElement) : (loader),\r\n            createElement(GoogleChartLoader, __assign({}, { chartLanguage: chartLanguage, chartPackages: chartPackages, chartVersion: chartVersion, mapsApiKey: mapsApiKey }, { onLoad: this.onLoad, onError: this.onError }))));\r\n    };\r\n    Chart.prototype.componentDidMount = function () {\r\n        this._isMounted = true;\r\n    };\r\n    Chart.prototype.componentWillUnmount = function () {\r\n        this._isMounted = false;\r\n    };\r\n    Chart.prototype.isFullyLoaded = function (google) {\r\n        var _a = this.props, controls = _a.controls, toolbarItems = _a.toolbarItems, getChartEditor = _a.getChartEditor;\r\n        return (google &&\r\n            google.visualization &&\r\n            google.visualization.ChartWrapper &&\r\n            google.visualization.Dashboard &&\r\n            (!controls || google.visualization.ChartWrapper) &&\r\n            (!getChartEditor || google.visualization.ChartEditor) &&\r\n            (!toolbarItems || google.visualization.drawToolbar));\r\n    };\r\n    Chart.defaultProps = chartDefaultProps;\r\n    return Chart;\r\n}(Component));\n\nexport default Chart;\nexport { Chart };\n"]},"metadata":{},"sourceType":"module"}