{"version":3,"file":"use-mouse-position.js","sources":["../../node_modules/@react-hook/event/src/index.tsx","../../node_modules/@react-hook/throttle/src/index.tsx","../../src/index.tsx","../../node_modules/@react-hook/passive-layout-effect/src/index.tsx","../../node_modules/@react-hook/latest/src/index.tsx"],"sourcesContent":["import * as React from 'react'\nimport useLayoutEffect from '@react-hook/passive-layout-effect'\nimport useLatest from '@react-hook/latest'\n\nfunction useEvent<\n  T extends Window = Window,\n  K extends keyof WindowEventMap = keyof WindowEventMap\n>(\n  target: Window | null,\n  type: K,\n  listener: WindowEventListener<K>,\n  cleanup?: (...args: any[]) => void\n): void\nfunction useEvent<\n  T extends Document = Document,\n  K extends keyof DocumentEventMap = keyof DocumentEventMap\n>(\n  target: Document | null,\n  type: K,\n  listener: DocumentEventListener<K>,\n  cleanup?: (...args: any[]) => void\n): void\nfunction useEvent<\n  T extends HTMLElement = HTMLElement,\n  K extends keyof HTMLElementEventMap = keyof HTMLElementEventMap\n>(\n  target: React.RefObject<T> | T | null,\n  type: K,\n  listener: ElementEventListener<K>,\n  cleanup?: (...args: any[]) => void\n): void\nfunction useEvent(\n  target: any,\n  type: any,\n  listener: any,\n  cleanup: any = noop\n): void {\n  const storedListener = useLatest(listener)\n  const storedCleanup = useLatest(cleanup)\n\n  useLayoutEffect(() => {\n    const targetEl = target && 'current' in target ? target.current : target\n    if (!targetEl) return\n\n    const listener = function (this: any, ...args: any[]) {\n      storedListener.current.apply(this, args)\n    }\n\n    targetEl.addEventListener(type, listener)\n    const cleanup = storedCleanup.current\n\n    return () => {\n      targetEl.removeEventListener(type, listener)\n      cleanup()\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [target, type])\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nfunction noop() {}\n\nexport type ElementEventListener<\n  K extends keyof HTMLElementEventMap = keyof HTMLElementEventMap\n> = (this: HTMLElement, ev: HTMLElementEventMap[K]) => any\n\nexport type DocumentEventListener<\n  K extends keyof DocumentEventMap = keyof DocumentEventMap\n> = (this: Document, ev: DocumentEventMap[K]) => any\n\nexport type WindowEventListener<\n  K extends keyof WindowEventMap = keyof WindowEventMap\n> = (this: Document, ev: WindowEventMap[K]) => any\n\nexport default useEvent\n","import * as React from 'react'\nimport useLatest from '@react-hook/latest'\n\nconst perf = typeof performance !== 'undefined' ? performance : Date\nconst now = () => perf.now()\n\nexport function useThrottleCallback<CallbackArguments extends any[]>(\n  callback: (...args: CallbackArguments) => void,\n  fps = 30,\n  leading = false\n): (...args: CallbackArguments) => void {\n  const storedCallback = useLatest(callback)\n  const ms = 1000 / fps\n  const prev = React.useRef(0)\n  const trailingTimeout = React.useRef<ReturnType<typeof setTimeout>>()\n  const clearTrailing = () =>\n    trailingTimeout.current && clearTimeout(trailingTimeout.current)\n  const deps = [fps, leading, storedCallback]\n\n  // Reset any time the deps change\n  React.useEffect(\n    () => () => {\n      prev.current = 0\n      clearTrailing()\n    },\n    deps\n  )\n\n  return React.useCallback(function () {\n    // eslint-disable-next-line prefer-rest-params\n    const args = arguments\n    const rightNow = now()\n    const call = () => {\n      prev.current = rightNow\n      clearTrailing()\n      storedCallback.current.apply(null, args as any)\n    }\n    const current = prev.current\n    // leading\n    if (leading && current === 0) return call()\n    // body\n    if (rightNow - current > ms) {\n      if (current > 0) return call()\n      prev.current = rightNow\n    }\n    // trailing\n    clearTrailing()\n    trailingTimeout.current = setTimeout(() => {\n      call()\n      prev.current = 0\n    }, ms)\n  }, deps)\n}\n\nexport function useThrottle<State>(\n  initialState: State | (() => State),\n  fps?: number,\n  leading?: boolean\n): [State, React.Dispatch<React.SetStateAction<State>>] {\n  const state = React.useState<State>(initialState)\n  return [state[0], useThrottleCallback(state[1], fps, leading)]\n}\n","import * as React from 'react'\nimport useEvent from '@react-hook/event'\nimport {useThrottleCallback} from '@react-hook/throttle'\n\nfunction useMouse<T extends HTMLElement = HTMLElement>(\n  target: React.RefObject<T> | T | null,\n  options: UseMouseOptions = {}\n): MousePosition {\n  const {fps = 30, enterDelay = 0, leaveDelay = 0} = options\n  const [state, dispatch] = React.useReducer<\n    React.Reducer<UseMouseState, UseMouseAction<T>>\n  >(\n    (state, action): UseMouseState => {\n      const {mouse, context} = state\n      const handleDown = (\n        state: UseMouseState,\n        action:\n          | TouchdownAction<T>\n          | MousedownAction<T>\n          | MousemoveAction<T>\n          | TouchmoveAction<T>\n      ): UseMouseState => {\n        const {event: e, element} = action\n        let event: MouseEvent | TouchEvent['touches'][0]\n        if ('touches' in e) {\n          event = (e as TouchEvent).touches[0]\n        } else {\n          event = e\n        }\n        const {clientX, clientY, screenX, screenY, pageX = 0, pageY = 0} = event\n        const rect = element.getBoundingClientRect()\n        const x = pageX - rect.left - (window.pageXOffset || window.scrollX)\n        const y = pageY - rect.top - (window.pageYOffset || window.scrollY)\n        // shims a mouseleave event for touch devices\n        if (\n          'touches' in e &&\n          (x < 0 || y < 0 || x > rect.width || y > rect.height)\n        ) {\n          return {\n            ...state,\n            context: {\n              ...state.context,\n              hoverStatus: 'leave',\n              touchStatus: 'end',\n            },\n          }\n        }\n\n        return {\n          context: {\n            ...state.context,\n            hoverStatus: 'enter',\n          },\n          mouse: {\n            ...state.mouse,\n            x,\n            y,\n            pageX,\n            pageY,\n            clientX,\n            clientY,\n            screenX,\n            screenY,\n            elementWidth: rect.width,\n            elementHeight: rect.height,\n            isOver: true,\n            isTouch: 'touches' in e,\n          },\n        }\n      }\n\n      if (action.type === 'mousemove') {\n        // Bails out if touch has ended\n        if (context.touchStatus === 'end') return state\n        return handleDown(state, action)\n      } else if (action.type === 'touchmove') {\n        const nextState: UseMouseState = {\n          context: {\n            ...context,\n            touchStatus: 'start',\n          },\n          mouse,\n        }\n\n        return handleDown(nextState, action)\n      } else if (action.type === 'touchdown') {\n        const nextState: UseMouseState = {\n          context: {\n            ...context,\n            touchStatus: 'start',\n          },\n          mouse: {\n            ...mouse,\n            isDown: true,\n          },\n        }\n\n        return handleDown(nextState, action)\n      } else if (action.type === 'mousedown') {\n        return {\n          context,\n          mouse: {\n            ...mouse,\n            isDown: true,\n          },\n        }\n      } else if (action.type === 'mouseup') {\n        return {context, mouse: {...mouse, isDown: false}}\n      } else if (action.type === 'mouseleave') {\n        return {\n          context: {\n            ...context,\n            hoverStatus: 'leave',\n          },\n          mouse: {...mouse, isOver: false},\n        }\n      } else if (action.type === 'touchleave') {\n        return {\n          context: {...context, hoverStatus: 'leave', touchStatus: 'end'},\n          mouse: {...mouse, isOver: false, isDown: false},\n        }\n      } else if (action.type === 'activeStatus') {\n        return {\n          context: {...context, activeStatus: action.value},\n          mouse,\n        }\n      }\n\n      return state\n    },\n    {\n      mouse: initialState,\n      context: initialContext,\n    }\n  )\n\n  const onMove = useThrottleCallback(\n    (event: MouseEvent | TouchEvent) => {\n      const element = target && 'current' in target ? target.current : target\n      if (!element) return\n      dispatch({type: 'mousemove', event, element})\n    },\n    fps,\n    true\n  )\n  const onTouchMove = useThrottleCallback(\n    (event: MouseEvent | TouchEvent) => {\n      const element = target && 'current' in target ? target.current : target\n      if (!element) return\n      dispatch({type: 'touchmove', event, element})\n    },\n    fps,\n    true\n  )\n  const onLeave = useThrottleCallback(\n    () => dispatch({type: 'mouseleave'}),\n    fps,\n    // This has to be false because we always want this callback to fire after any\n    // move events.\n    false\n  )\n  const onDown = useThrottleCallback(\n    (event: MouseEvent | TouchEvent) => {\n      const element = target && 'current' in target ? target.current : target\n      if (!element) return\n      dispatch(\n        'touches' in event\n          ? {\n              type: 'touchdown',\n              element,\n              event: event,\n            }\n          : {\n              type: 'mousedown',\n              element,\n              event: event,\n            }\n      )\n    },\n    fps,\n    true\n  )\n  const onUp = useThrottleCallback(\n    () => dispatch({type: 'mouseup'}),\n    fps,\n    // This has to be false because we always want this callback to fire after any\n    // down events.\n    false\n  )\n  const onTouchEnd = useThrottleCallback(\n    () => dispatch({type: 'touchleave'}),\n    fps,\n    // This has to be false because we always want this callback to fire after any\n    // move events.\n    false\n  )\n\n  useEvent(target, 'mouseenter', onMove)\n  useEvent(target, 'mousemove', onMove)\n  useEvent(target, 'mouseleave', onLeave)\n  useEvent(target, 'mousedown', onDown)\n  useEvent(window, 'mousedown', onDown)\n  useEvent(window, 'mouseup', onUp)\n  useEvent(target, 'touchstart', onDown)\n  useEvent(target, 'touchmove', onTouchMove)\n  useEvent(target, 'touchend', onTouchEnd)\n  useEvent(target, 'touchcancel', onTouchEnd)\n\n  React.useEffect(() => {\n    if (state.context.hoverStatus === 'enter') {\n      if (enterDelay) {\n        const timeout = setTimeout(\n          () => dispatch({type: 'activeStatus', value: 'active'}),\n          enterDelay\n        )\n        return () => clearTimeout(timeout)\n      }\n\n      dispatch({type: 'activeStatus', value: 'active'})\n    } else {\n      if (leaveDelay) {\n        const timeout = setTimeout(\n          () => dispatch({type: 'activeStatus', value: 'inactive'}),\n          leaveDelay\n        )\n        return () => clearTimeout(timeout)\n      }\n\n      dispatch({type: 'activeStatus', value: 'inactive'})\n    }\n  }, [state.context.hoverStatus, enterDelay, leaveDelay])\n\n  return state.context.activeStatus === 'active' ? state.mouse : initialState\n}\n\nconst initialState: MousePosition = {\n  x: null,\n  y: null,\n  pageX: null,\n  pageY: null,\n  clientX: null,\n  clientY: null,\n  screenX: null,\n  screenY: null,\n  elementWidth: null,\n  elementHeight: null,\n  isOver: false,\n  isDown: false,\n  isTouch: false,\n}\n\nconst initialContext: UseMouseState['context'] = {\n  hoverStatus: 'idle',\n  touchStatus: 'idle',\n  activeStatus: 'inactive',\n}\n\ninterface UseMouseState {\n  mouse: MousePosition\n  context: {\n    hoverStatus: 'idle' | 'enter' | 'leave'\n    touchStatus: 'idle' | 'start' | 'end'\n    activeStatus: 'inactive' | 'active'\n  }\n}\n\ntype UseMouseAction<T extends HTMLElement> =\n  | MousemoveAction<T>\n  | {\n      type: 'activeStatus'\n      value: UseMouseState['context']['activeStatus']\n    }\n  | {\n      type: 'mouseleave'\n    }\n  | {\n      type: 'touchleave'\n    }\n  | {\n      type: 'mouseup'\n    }\n  | TouchdownAction<T>\n  | MousedownAction<T>\n  | TouchmoveAction<T>\n\ntype TouchdownAction<T> = {\n  type: 'touchdown'\n  element: T\n  event: TouchEvent\n}\n\ntype MousedownAction<T> = {\n  type: 'mousedown'\n  element: T\n  event: MouseEvent\n}\n\ntype MousemoveAction<T> = {\n  type: 'mousemove'\n  element: T\n  event: MouseEvent | TouchEvent\n}\n\ntype TouchmoveAction<T> = {\n  type: 'touchmove'\n  element: T\n  event: MouseEvent | TouchEvent\n}\n\nexport interface UseMouseOptions {\n  enterDelay?: number\n  leaveDelay?: number\n  fps?: number\n}\n\nexport interface MousePosition {\n  x: number | null\n  y: number | null\n  pageX: number | null\n  pageY: number | null\n  clientX: number | null\n  clientY: number | null\n  screenX: number | null\n  screenY: number | null\n  elementWidth: number | null\n  elementHeight: number | null\n  isOver: boolean\n  isDown: boolean\n  isTouch: boolean\n}\n\nexport default useMouse\n","import * as React from 'react'\n\nconst usePassiveLayoutEffect =\n  React[\n    typeof document !== 'undefined' && document.createElement !== void 0\n      ? 'useLayoutEffect'\n      : 'useEffect'\n  ]\n\nexport default usePassiveLayoutEffect\n","import * as React from 'react'\n\nconst useLatest = <T extends any>(current: T) => {\n  const storedValue = React.useRef(current)\n  storedValue.current = current\n  return storedValue\n}\n\nexport default useLatest\n"],"names":["useEvent","target","type","listener","cleanup","args","storedListener","current","apply","this","noop","useLatest","storedCleanup","useLayoutEffect","targetEl","addEventListener","removeEventListener","useThrottleCallback","callback","fps","leading","prev","clearTrailing","storedCallback","ms","React","trailingTimeout","clearTimeout","deps","arguments","rightNow","now","call","setTimeout","state","action","e","event","element","touches","clientX","clientY","screenX","screenY","pageX","pageY","rect","getBoundingClientRect","x","left","window","pageXOffset","scrollX","y","top","pageYOffset","scrollY","width","height","context","hoverStatus","touchStatus","mouse","elementWidth","elementHeight","isOver","isTouch","handleDown","isDown","activeStatus","value","usePassiveLayoutEffect","document","createElement","storedValue","perf","performance","Date","initialState","initialContext","options","dispatch","enterDelay","leaveDelay","onMove","onTouchMove","onLeave","onDown","onUp","onTouchEnd","timeout"],"mappings":"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"}